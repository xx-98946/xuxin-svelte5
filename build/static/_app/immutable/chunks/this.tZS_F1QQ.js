import{B as y,D as c,E as u,F as E,I,H as k,G as D,J as d,K as L,f as T,S as x}from"./runtime.DVrlIcN3.js";import{h as A,s as h,b as B}from"./disclose-version.BHL-t9ee.js";function N(s,a,l,i=null,e=!1){let f=null,t=null,r=null;const b=y(()=>{if(r===(r=!!a()))return;let n=!1;if(A){const o=s.data===k;r===o&&(D(B),h(!1),n=!0)}r?(f?c(f):f=u(()=>l(s)),t&&E(t,()=>{t=null})):(t?c(t):i&&(t=u(()=>i(s))),f&&E(f,()=>{f=null})),n&&h(!0)});e&&(b.f|=I)}function S(s,a){var i;var l=s&&((i=s[x])==null?void 0:i.t);return s===a||l===a}function O(s,a,l,i){d(()=>{var e,f;return L(()=>{e=f,f=(i==null?void 0:i())||[],T(()=>{s!==l(...f)&&(a(s,...f),e&&S(l(...e),s)&&a(null,...e))})}),()=>{d(()=>{f&&S(l(...f),s)&&a(null,...f)})}})}export{O as b,N as i};
